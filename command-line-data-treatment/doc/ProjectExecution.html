<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ProjectExecution - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-derive_file">#derive_file</a>
    
    <li ><a href="#method-i-non_neutral_element">#non_neutral_element</a>
    
    <li ><a href="#method-i-replace-21">#replace!</a>
    
    <li ><a href="#method-i-unzip_slice_size_2">#unzip_slice_size_2</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ProjectExecution">
  <h1 id="class-ProjectExecution" class="class">
    class ProjectExecution
  </h1>

  <section class="description">
    
<p>instead of replacing a file, duplicate chunks having an entry.  supposed
you have a file <a href="modules_txt.html">modules.txt</a>:</p>

<p>MY_MODULE_1:</p>

<p>myModule_1 is a special module. execute it by calling my_module_1 on your
interface.</p>

<p>MY_MODULE_3:</p>

<p>myModule_3 is a special module. execute it by calling my_module_3 on your
interface.</p>

<pre class="ruby"><span class="ruby-identifier">probably</span> <span class="ruby-identifier">you</span> <span class="ruby-identifier">want</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">add</span> <span class="ruby-identifier">entries</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">my_module_2</span> <span class="ruby-identifier">too</span>, <span class="ruby-identifier">right?</span>
</pre>

<p>usage: ./derive_file.rb <a href="modules_txt.html">modules.txt</a>
/dev/stdout “” my_module_1 my_module_2 myModule_1 myModule_2 MY_MODULE_1
MY_MODULE_2  # outputs to /dev/stdout ./derive_file.rb “” /dev/stdout “” 
my_module_1 my_module_2 myModule_1 myModule_2 MY_MODULE_1 MY_MODULE_2  #
edit <a href="modules_txt.html">modules.txt</a> instead</p>

<p>probably you want to fine tune the value  of regexes variable in the source
code.  the contain which kind of lines should be grouped to the previous
chunks (empty lines, comments, …)</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-derive_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">derive_file</span><span
            class="method-args">(args=ARGV)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="derive_file-source">
            <pre><span class="ruby-comment"># File derive_file.rb, line 40</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">derive_file</span> <span class="ruby-identifier">args</span>=<span class="ruby-constant">ARGV</span>
  <span class="ruby-identifier">infile</span>  = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-identifier">outfile</span> = (<span class="ruby-identifier">non_neutral_element</span> [<span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>])  <span class="ruby-operator">||</span> <span class="ruby-identifier">infile</span>
  <span class="ruby-identifier">regexes</span> = (<span class="ruby-identifier">non_neutral_element</span> [<span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>])  <span class="ruby-operator">||</span> [<span class="ruby-regexp">/^$/</span>, (<span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span> <span class="ruby-string">&#39;^#$&#39;</span>) ]
  <span class="ruby-identifier">replacements</span> = <span class="ruby-constant">Hash</span>[<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>].<span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">lines</span> =  <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlines</span> <span class="ruby-identifier">infile</span>
  <span class="ruby-identifier">last_chunck</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">line_chunks</span> = <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">chunk</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-identifier">last_chunck</span> = (( <span class="ruby-identifier">last_chunck</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">regexes</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">regex</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">l</span>.<span class="ruby-identifier">index</span> <span class="ruby-identifier">regex</span>)}.<span class="ruby-identifier">any?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">replacements</span>.<span class="ruby-identifier">transpose</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">what</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">l</span>.<span class="ruby-identifier">index</span> <span class="ruby-identifier">what</span>) }.<span class="ruby-identifier">any?</span> ) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">false</span>) }.<span class="ruby-identifier">entries</span>

  <span class="ruby-identifier">new_contents</span> = <span class="ruby-identifier">line_chunks</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">line_chunck</span><span class="ruby-operator">|</span>  <span class="ruby-identifier">derive</span>, <span class="ruby-identifier">_lines</span> = <span class="ruby-identifier">line_chunck</span> ;  <span class="ruby-identifier">derive</span> <span class="ruby-operator">&amp;&amp;</span> ( <span class="ruby-identifier">_lines</span>.<span class="ruby-identifier">concat</span> ( <span class="ruby-identifier">_lines</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">_l</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">replace!</span> <span class="ruby-identifier">_l</span>.<span class="ruby-identifier">clone</span>, <span class="ruby-identifier">replacements</span>)  }) ) <span class="ruby-operator">||</span> <span class="ruby-identifier">_lines</span> }


  <span class="ruby-constant">File</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">outfile</span>, <span class="ruby-identifier">new_contents</span>.<span class="ruby-identifier">join</span>

<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-non_neutral_element" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">non_neutral_element</span><span
            class="method-args">(args=ARGV)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="non_neutral_element-source">
            <pre><span class="ruby-comment"># File derive_file.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">non_neutral_element</span> <span class="ruby-identifier">args</span>=<span class="ruby-constant">ARGV</span>
  <span class="ruby-comment"># returns something that can be tested as false if the first element</span>
  <span class="ruby-comment"># in array is considered to be the neutral element of the class.</span>
  <span class="ruby-comment"># otherwise, returns that element</span>
  <span class="ruby-identifier">element</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">element</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">element</span>.<span class="ruby-identifier">size</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">element</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-replace-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">replace!</span><span
            class="method-args">(s, replacements ;)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="replace-21-source">
            <pre><span class="ruby-comment"># File derive_file.rb, line 38</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">replace!</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">replacements</span> ; <span class="ruby-identifier">replacements</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">what</span>, <span class="ruby-identifier">with</span> = <span class="ruby-identifier">r</span> ;  (<span class="ruby-identifier">s</span>.<span class="ruby-identifier">gsub!</span> <span class="ruby-identifier">what</span>, <span class="ruby-identifier">with</span>) } ; <span class="ruby-identifier">s</span> ; <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unzip_slice_size_2" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unzip_slice_size_2</span><span
            class="method-args">(args=ARGV)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="unzip_slice_size_2-source">
            <pre><span class="ruby-comment"># File unzip_slice_size_2.rb, line 38</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unzip_slice_size_2</span> <span class="ruby-identifier">args</span>=<span class="ruby-constant">ARGV</span>
  <span class="ruby-identifier">print_method</span> = (<span class="ruby-identifier">non_neutral_element</span> [<span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>]) <span class="ruby-operator">||</span> <span class="ruby-string">&quot;print&quot;</span>
  <span class="ruby-identifier">prepend_0</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-identifier">append_0</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-identifier">prepend_1</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-identifier">append_1</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each_slice</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> [ <span class="ruby-node">&quot;#{prepend_0}#{e[0]}#{append_0}&quot;</span>, <span class="ruby-node">&quot;#{prepend_1}#{e[1]}#{append_1}&quot;</span> ] }.<span class="ruby-identifier">transpose</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:compact</span>).<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">method</span>(<span class="ruby-identifier">print_method</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

